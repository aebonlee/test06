# HDH Fintech 기능 요구사항 명세서

> **최종 업데이트:** 2025-12-09
> **작성자:** Sunny (써니)
> **MVP 범위:** 전체 기능 (회원가입 → 준비 → 관리 → 문의)
> **목표 완료일:** 2025-12-20

---

## 📋 문서 개요

본 문서는 HDH Fintech의 기능 요구사항을 정의합니다.

**서비스 정체성:**
- HDH 솔루션 운영자를 위한 지원 플랫폼
- 월 10만원 구독료 (AI 자동화 프로그램 포함)
- 교육, 매뉴얼, 운영 관리 도구 제공

**MVP 제약사항:**
- ✅ HDH 솔루션 운영자만 대상
- ✅ 수동 결제 (무통장 입금)
- ❌ 자동 결제 제외
- ❌ 팀 협업 기능 제외

---

## 🎯 핵심 기능

### 1. 사용자 인증 (Authentication)

#### 1.1 회원가입

**기능 ID:** FR-AUTH-001

**설명:** 신규 사용자가 이메일과 비밀번호로 계정 생성

**화면:**
```
┌─────────────────────────────────────────┐
│ HDH Fintech 회원가입                    │
├─────────────────────────────────────────┤
│ HDH 솔루션 운영자를 위한 지원 플랫폼    │
│                                         │
│ 이메일: [____________________]          │
│ 비밀번호: [____________________]        │
│ 비밀번호 확인: [____________________]   │
│ 닉네임: [____________________]          │
│ 이름: [____________________]            │
│ 전화번호: [____________________]        │
│                                         │
│ 약관 동의:                              │
│ ☑ 서비스 이용약관 (필수)                │
│ ☑ 개인정보 처리방침 (필수)              │
│ ☐ 마케팅 정보 수신 (선택)               │
│                                         │
│ [회원가입]                              │
└─────────────────────────────────────────┘
```

**입력:**
- 이메일 (필수, 고유값)
- 비밀번호 (필수, 8자 이상, 영문+숫자+특수문자)
- 비밀번호 확인 (필수)
- 닉네임 (필수, 2-20자)
- 이름 (필수)
- 전화번호 (필수, 휴대폰 형식)

**처리:**
1. 이메일 중복 검증
2. 닉네임 중복 검증
3. 비밀번호 강도 검증
4. 비밀번호 일치 검증
5. 전화번호 형식 검증
6. 필수 약관 동의 확인
7. Supabase Auth에 사용자 등록
8. `users` 테이블에 프로필 생성
9. Dashboard로 리디렉션

```sql
INSERT INTO users (
  user_id, email, nickname, name, phone,
  marketing_consent, created_at
) VALUES (
  uuid_generate_v4(), 'user@example.com', '닉네임',
  '김철수', '010-1234-5678', false, NOW()
);
```

**출력:**
- 성공: Dashboard 진입 + 환영 메시지
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎉 HDH Fintech에 오신 것을 환영합니다!

HDH 솔루션 운영을 위한 모든 지원이 준비되어 있습니다.

📌 다음 단계:
1. 솔루션 이해하기
2. 아카데미 교육 수강하기
3. 추천인 코드 신청하기
4. 매뉴얼 숙지하기

[시작하기]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**예외 처리:**
- 이메일 중복: `❌ 이미 가입된 이메일입니다. [로그인하기] [다른 이메일 사용]`
- 닉네임 중복: `❌ 이미 사용 중인 닉네임입니다. 다른 닉네임을 입력해주세요.`
- 비밀번호 불일치: `❌ 비밀번호가 일치하지 않습니다.`
- 비밀번호 강도 부족: `❌ 비밀번호가 너무 약합니다. 최소 8자 이상, 영문+숫자+특수문자 포함 필요`
- 전화번호 형식 오류: `❌ 올바른 전화번호 형식이 아닙니다. 예: 010-1234-5678`
- 필수 약관 미동의: `❌ 필수 약관에 동의해주세요.`

#### 1.2 로그인

**기능 ID:** FR-AUTH-002

**설명:** 기존 사용자가 로그인

**입력:**
- 이메일
- 비밀번호

**처리:**
1. Supabase Auth 인증
2. 세션 생성
3. Dashboard로 리디렉션

**출력:**
- 성공: Dashboard 페이지
- 실패: `❌ 이메일 또는 비밀번호가 잘못되었습니다`

#### 1.3 로그아웃

**기능 ID:** FR-AUTH-003

**처리:**
1. Supabase 세션 종료
2. 로컬 스토리지 클리어
3. 로그인 페이지로 이동

---

### 2. 준비 프로세스 (Preparation Process)

#### 2.1 HDH 솔루션 이해하기

**기능 ID:** FR-PREP-001

**설명:** 사용자가 HDH 솔루션에 대한 기본 이해를 습득

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ HDH 솔루션 이해하기                                 │
├─────────────────────────────────────────────────────┤
│                                                     │
│ # HDH 솔루션이란?                                   │
│                                                     │
│ 10년 검증된 프롭펌 헤지 트레이딩 전략               │
│                                                     │
│ ## 핵심 특징                                        │
│ - 84:16 구조 (챌린지 계좌 + 보험 계좌)              │
│ - AI 자동화 프로그램                                │
│ - 안정적인 수익 구조                                │
│                                                     │
│ ## 수익 구조                                        │
│ - 월 평균 수익: 100만원 ~ 1,000만원                 │
│ - 구독료: 월 10만원 (AI 프로그램 포함)              │
│                                                     │
│ ## 운영 방식                                        │
│ - AI 자동화 프로그램 활용                           │
│ - 실시간 모니터링                                   │
│ - 리스크 관리                                       │
│                                                     │
│ [다음 단계: 아카데미 교육 수강하기]                 │
└─────────────────────────────────────────────────────┘
```

**처리:**
- 콘텐츠 읽기 완료 후 다음 단계로 이동 가능

#### 2.2 아카데미 교육 수강 신청

**기능 ID:** FR-PREP-002

**설명:** 사용자가 HDH 아카데미 교육 수강 신청

**화면:**
```
┌─────────────────────────────────────────┐
│ 아카데미 교육 수강 신청                 │
├─────────────────────────────────────────┤
│ 교육 과정:                              │
│ - Day 1: 솔루션 이론                    │
│   (프롭펌 챌린지, 금선물 CFD, 헷지 전략)│
│ - Day 2: 플랫폼 사용법                  │
│   (MT5 설정, 자동화 시스템)             │
│ - Day 3: 실전 시뮬레이션                │
│   (모의거래, 최종 테스트)               │
│                                         │
│ 신청 정보:                              │
│ 이름: [김철수] (자동입력)               │
│ 이메일: [user@example.com] (자동입력)   │
│ 전화번호: [010-1234-5678] (자동입력)    │
│                                         │
│ 수강 동기:                              │
│ [_________________________________]     │
│                                         │
│ 트레이딩 경험:                          │
│ [_________________________________]     │
│                                         │
│ 기대하는 점:                            │
│ [_________________________________]     │
│                                         │
│ [신청하기]                              │
└─────────────────────────────────────────┘
```

**입력:**
- 이름 (자동 입력)
- 이메일 (자동 입력)
- 전화번호 (자동 입력)
- 수강 동기 (필수)
- 트레이딩 경험 (필수)
- 기대하는 점 (필수)

**처리:**
```sql
INSERT INTO academy_applications (
  user_id, name, email, phone,
  motivation, experience, expectations,
  status, created_at
) VALUES (
  current_user_id, '김철수', 'user@example.com',
  '010-1234-5678', '수강 동기...', '트레이딩 경험...',
  '기대하는 점...', 'pending', NOW()
);
```

**출력:**
```
✅ 수강신청이 완료되었습니다!
담당자가 확인 후 1-2일 이내에 연락 드리겠습니다.

📌 안내:
- 교육 일정은 개별 안내 예정
- 교육 완료 후 추천인 코드 신청 가능
```

**예외 처리:**
- 필수 항목 미입력: `❌ 필수 입력 항목을 모두 채워주세요.`

#### 2.3 교육 이수 완료 (관리자)

**기능 ID:** FR-PREP-003

**설명:** 관리자가 교육 이수 상태를 완료로 변경

**처리:**
```sql
UPDATE academy_applications
SET status = 'completed',
    completed_at = NOW(),
    completed_by = 'sunny'
WHERE user_id = target_user_id;

UPDATE users
SET academy_completed = true
WHERE user_id = target_user_id;
```

#### 2.4 추천인 코드 신청

**기능 ID:** FR-PREP-004

**설명:** 교육 이수 완료 후 추천인 코드 신청

**화면:**
```
┌─────────────────────────────────────────┐
│ 추천인 코드 신청                        │
├─────────────────────────────────────────┤
│ 신청 정보:                              │
│ 이름: [김철수] (자동입력)               │
│ 이메일: [user@example.com] (자동입력)   │
│ 전화번호: [010-1234-5678] (자동입력)    │
│ 교육 이수: ✅ 완료                       │
│                                         │
│ 신청 사유:                              │
│ [_________________________________]     │
│                                         │
│ HDH 솔루션을 어떻게 알게 되었나요?      │
│ [_________________________________]     │
│                                         │
│ [신청하기]                              │
└─────────────────────────────────────────┘
```

**입력:**
- 신청 사유 (필수)
- HDH 솔루션을 알게 된 경로 (필수)

**처리:**
1. 교육 이수 여부 확인 (`academy_completed = true`)
2. 추천인 코드 생성 (`HDH{YEAR}{RANDOM}`)
```sql
-- 교육 이수 확인
SELECT academy_completed FROM users
WHERE user_id = current_user_id;

-- 추천인 코드 생성
INSERT INTO referral_codes (
  user_id, code, application_reason, how_found,
  status, created_at
) VALUES (
  current_user_id, 'HDH2024ABC123', '신청 사유...',
  '알게 된 경로...', 'approved', NOW()
);

UPDATE users
SET referral_code = 'HDH2024ABC123'
WHERE user_id = current_user_id;
```

**출력:**
```
✅ 추천인 코드가 발급되었습니다!

🎯 나의 추천인 코드: HDH2024ABC123

📌 추천인 코드 용도:
- 회원 유입 경로 추적용
- 향후 통계 분석 자료로 활용

💡 참고:
- 추천인 코드는 순수 추적 목적이며, 별도 리워드는 없습니다.
```

**예외 처리:**
- 교육 미이수:
```
❌ 추천인 코드는 아카데미 교육 이수 후 신청 가능합니다.

📌 안내:
- 먼저 아카데미 교육을 수강해주세요.
- 교육 이수 후 추천인 코드 신청이 가능합니다.

[아카데미 교육 신청하기]
```

#### 2.5 매뉴얼 숙지하기

**기능 ID:** FR-PREP-005

**설명:** HDH 솔루션 운영 매뉴얼 학습

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 매뉴얼 숙지하기                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│ 📚 매뉴얼 목차:                                     │
│                                                     │
│ 1. HDH 솔루션 운영 가이드                           │
│ 2. 계좌 개설 방법                                   │
│ 3. API 연결 방법                                    │
│ 4. 트레이딩 설정 방법                               │
│ 5. 리스크 관리 가이드                               │
│ 6. 자주 묻는 질문 (FAQ)                             │
│                                                     │
│ [다음 단계: AI 프로그램 다운로드]                   │
└─────────────────────────────────────────────────────┘
```

#### 2.6 AI 프로그램 다운로드 및 설정

**기능 ID:** FR-PREP-006

**설명:** AI 자동화 프로그램 다운로드 및 My Settings 설정

**화면 (다운로드):**
```
┌─────────────────────────────────────────┐
│ AI 프로그램 다운로드                    │
├─────────────────────────────────────────┤
│ HDH AI 자동화 프로그램                  │
│                                         │
│ 버전: v1.0.0                            │
│ 파일 크기: 150MB                        │
│ 업데이트: 2024-12-09                    │
│                                         │
│ [다운로드]                              │
└─────────────────────────────────────────┘
```

**화면 (My Settings):**
```
┌─────────────────────────────────────────┐
│ My Settings                             │
├─────────────────────────────────────────┤
│ 1. 계좌 정보                            │
│    계좌번호: [____________]             │
│    [추가]                               │
│                                         │
│ 2. API 연결                             │
│    API 키: [____________]               │
│    API 시크릿: [____________]           │
│    [연결 테스트]                        │
│                                         │
│ 3. 트레이딩 파라미터                    │
│    리스크 레벨: [중간▼]                 │
│    포지션 크기: [____________]          │
│    손절 레벨: [____________]            │
│    익절 레벨: [____________]            │
│                                         │
│ 4. 알림 설정                            │
│    ☑ 이메일 알림 (수익/손실)            │
│    ☑ 시스템 알림                        │
│    ☑ 중요 공지 알림                     │
│                                         │
│ [저장]                                  │
└─────────────────────────────────────────┘
```

**처리 (API 연결 테스트):**
```sql
-- 설정 저장
UPDATE user_settings
SET api_key = '...',
    api_secret = '...',
    risk_level = 'medium',
    position_size = 0.1,
    stop_loss = 0.02,
    take_profit = 0.05,
    email_notifications = true,
    system_notifications = true,
    important_notices = true
WHERE user_id = current_user_id;
```

**출력 (연결 성공):**
```
✅ API 연결이 정상적으로 작동합니다.

연결 정보:
- 계좌: ********1234
- 상태: 활성
- 마지막 확인: 2024-12-09 14:30
```

**출력 (연결 실패):**
```
❌ API 연결에 실패했습니다.

원인:
- API 키가 유효하지 않거나
- 네트워크 연결 문제일 수 있습니다.

[매뉴얼 보기] [다시 시도]
```

#### 2.7 준비 완료

**기능 ID:** FR-PREP-007

**설명:** 모든 준비 단계 완료 확인

**화면:**
```
🎉 HDH 솔루션 운영 준비가 완료되었습니다!

✅ 완료된 단계:
1. ✅ HDH 솔루션 이해 완료
2. ✅ 아카데미 교육 이수 완료
3. ✅ 추천인 코드 발급 완료
4. ✅ 매뉴얼 숙지 완료
5. ✅ AI 프로그램 설치 완료
6. ✅ My Settings 설정 완료

💡 이제 HDH 솔루션 운영을 시작할 수 있습니다!

다음 단계:
- 관리 메뉴에서 수익/손실 관리
- Sunny에게 궁금한 점 문의
```

---

### 3. 관리 기능 (Management)

#### 3.1 My 누적 손익

**기능 ID:** FR-MGMT-001

**설명:** 누적 손익 데이터 입력 및 조회

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ My 누적 손익                                        │
├─────────────────────────────────────────────────────┤
│ [일별▼] [주별] [월별] [전체]   [+ 새 데이터 추가]  │
│                                                     │
│ 📊 전체 기간 누적 손익: +₩15,250,000               │
│                                                     │
│ ━━ 월별 손익 요약 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ 2024-12: +₩3,500,000                                │
│ 2024-11: +₩4,200,000                                │
│ 2024-10: +₩2,800,000                                │
│                                                     │
│ 📈 수익률 그래프                                    │
│ [그래프 영역]                                       │
│                                                     │
│ [CSV 내보내기] [Excel 내보내기]                     │
└─────────────────────────────────────────────────────┘
```

**화면 (새 데이터 추가):**
```
┌─────────────────────────────────────────┐
│ 새 데이터 추가                          │
├─────────────────────────────────────────┤
│ 날짜: [2024-12-09▼]                     │
│ 손익 금액: [____________] 원            │
│ 거래 건수: [____________]               │
│ 메모: [__________________________]      │
│                                         │
│ [취소] [저장]                           │
└─────────────────────────────────────────┘
```

**처리:**
```sql
INSERT INTO cumulative_pl (
  user_id, date, pl_amount, trade_count, memo
) VALUES (
  current_user_id, '2024-12-09', 500000, 5, '메모...'
);
```

**출력:**
```
✅ 누적 손익 데이터가 저장되었습니다.
```

**예외 처리:**
- 날짜 형식 오류: `❌ 입력 형식이 올바르지 않습니다. 날짜: YYYY-MM-DD 형식, 금액: 숫자만 입력`
- 중복 데이터:
```
⚠️ 해당 날짜에 이미 데이터가 있습니다.

[기존 데이터 수정] [새로 추가] [취소]
```

#### 3.2 My 손익 저널

**기능 ID:** FR-MGMT-002

**설명:** 손익 저널 작성 및 관리

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ My 손익 저널                                        │
├─────────────────────────────────────────────────────┤
│ [날짜순▼] [손익순]  [수익] [손실] [전체]            │
│ [+ 새 저널 작성]                                    │
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ 2024-12-09 | +₩500,000                          ││
││ 전략: 84:16 헷지 전략                           ││
││ 감정 상태: 차분함                               ││
││ 배운 점: 손절 타이밍 중요                       ││
││ [상세보기]                                       ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ 2024-12-08 | -₩100,000                          ││
││ 전략: 84:16 헷지 전략                           ││
││ 감정 상태: 불안함                               ││
││ 배운 점: 포지션 크기 조정 필요                   ││
││ [상세보기]                                       ││
│└─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

**화면 (새 저널 작성):**
```
┌─────────────────────────────────────────┐
│ 새 저널 작성                            │
├─────────────────────────────────────────┤
│ 날짜: [2024-12-09▼]                     │
│                                         │
│ 거래 내역:                              │
│ [_________________________________]     │
│                                         │
│ 손익 금액: [____________] 원            │
│                                         │
│ 전략 분석:                              │
│ [_________________________________]     │
│                                         │
│ 감정 상태:                              │
│ [_________________________________]     │
│                                         │
│ 배운 점:                                │
│ [_________________________________]     │
│                                         │
│ 개선할 점:                              │
│ [_________________________________]     │
│                                         │
│ [취소] [저장]                           │
└─────────────────────────────────────────┘
```

**처리:**
```sql
INSERT INTO pl_journal (
  user_id, date, trade_details, pl_amount,
  strategy_analysis, emotion, lessons_learned,
  improvements_needed
) VALUES (
  current_user_id, '2024-12-09', '거래 내역...',
  500000, '전략 분석...', '감정 상태...',
  '배운 점...', '개선할 점...'
);
```

**출력:**
```
✅ 손익 저널이 저장되었습니다.

💡 팁:
- 꾸준한 저널 작성은 트레이딩 실력 향상에 도움이 됩니다.
- 과거 저널을 복습하며 패턴을 발견해보세요.
```

#### 3.3 My Settings

**기능 ID:** FR-MGMT-003

**설명:** 프로필 정보 및 트레이딩 설정 관리

(FR-PREP-006과 동일한 화면 및 기능)

---

### 4. 문의 기능 (Inquiry)

#### 4.1 Sunny AI 챗봇

**기능 ID:** FR-INQ-001

**설명:** AI 챗봇을 통한 즉시 문의 및 답변

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ ☀️ Sunny에게 묻기                                   │
├─────────────────────────────────────────────────────┤
│ 질문:                                               │
│ ┌─────────────────────────────────────────────────┐│
││ API 연결이 안 돼요                               ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ [문의하기]                                          │
│                                                     │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                     │
│ 💬 답변:                                            │
│                                                     │
│ API 연결 문제를 겪고 계시군요. 다음 단계를          │
│ 확인해주세요:                                       │
│                                                     │
│ 1. My Settings에서 API 키 확인                      │
│    - 올바른 API 키가 입력되어 있나요?               │
│    - [My Settings 바로가기]                         │
│                                                     │
│ 2. 계좌 상태 확인                                   │
│    - 계좌가 활성화되어 있나요?                      │
│    - 계좌에 충분한 잔액이 있나요?                   │
│                                                     │
│ 3. 네트워크 연결 확인                               │
│    - 인터넷 연결이 정상인가요?                      │
│                                                     │
│ 📖 상세 가이드: [API 연결 매뉴얼 보기]              │
│                                                     │
│ 도움이 더 필요하시면 고객센터로 문의해주세요.       │
│ [고객센터 문의하기]                                 │
└─────────────────────────────────────────────────────┘
```

**입력:**
- 질문 텍스트

**처리:**
1. AI API 호출 (ChatGPT/Gemini/Perplexity)
2. 답변 생성
3. 관련 링크 제공

**예외 처리:**
- AI 응답 불가:
```
😅 죄송합니다. 질문을 정확히 이해하지 못했어요.

다음 방법을 시도해보세요:
- 질문을 더 구체적으로 작성해주세요
- 고객센터에 직접 문의하기

[고객센터 문의]
```

#### 4.2 고객센터 문의

**기능 ID:** FR-INQ-002

**설명:** 고객센터에 문의 작성 및 답변 확인

**화면 (문의 유형 선택):**
```
┌─────────────────────────────────────────┐
│ 📞 고객센터                             │
├─────────────────────────────────────────┤
│ 무엇을 도와드릴까요?                    │
│                                         │
│ [일반 문의]                             │
│ - 서비스 이용 방법                      │
│ - 계정 관련 문의                        │
│                                         │
│ [기술 지원]                             │
│ - API 연결 문제                         │
│ - 프로그램 오류                         │
│ - 설정 문제                             │
│                                         │
│ [교육 문의]                             │
│ - 아카데미 교육 관련                    │
│ - 추천인 코드 문의                      │
│                                         │
│ [긴급 문의]                             │
│ - 즉시 처리가 필요한 문제               │
└─────────────────────────────────────────┘
```

**화면 (문의 작성):**
```
┌─────────────────────────────────────────┐
│ 문의 작성                               │
├─────────────────────────────────────────┤
│ 이름: [김철수] (자동입력)               │
│ 이메일: [user@example.com] (자동입력)   │
│ 전화번호: [010-1234-5678] (자동입력)    │
│ 문의 유형: [기술 지원] (선택됨)         │
│                                         │
│ 제목: [__________________________]      │
│                                         │
│ 문의 내용:                              │
│ [_________________________________]     │
│ [_________________________________]     │
│                                         │
│ 첨부 파일: [파일 선택]                  │
│ (스크린샷, 로그 파일 등, 최대 10MB)     │
│                                         │
│ [취소] [문의하기]                       │
└─────────────────────────────────────────┘
```

**처리:**
```sql
INSERT INTO support_tickets (
  user_id, category, subject, message,
  attachment_url, status
) VALUES (
  current_user_id, '기술 지원', '제목...',
  '문의 내용...', 'uploads/screenshot.png', 'open'
);
```

**출력:**
```
✅ 문의가 접수되었습니다!

문의 번호: #2024120901

📌 처리 안내:
- 일반 문의: 1-2일 이내 답변
- 기술 지원: 당일 답변
- 긴급 문의: 2-4시간 이내 답변

답변은 이메일로 발송되며, 고객센터에서도 확인 가능합니다.

[내 문의 내역 보기] [확인]
```

**예외 처리:**
- 필수 항목 미입력:
```
❌ 필수 항목을 모두 입력해주세요.

- 제목 (필수)
- 문의 내용 (필수)
```
- 첨부 파일 용량 초과:
```
❌ 첨부 파일이 너무 큽니다.

- 최대 용량: 10MB
- 현재 파일: 15MB

파일을 압축하거나 분할하여 첨부해주세요.
```

#### 4.3 문의 내역 조회

**기능 ID:** FR-INQ-003

**설명:** 사용자의 문의 내역 및 답변 확인

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 내 문의 내역                                        │
├─────────────────────────────────────────────────────┤
│ [+ 새 문의]                                         │
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ ✅ 답변 완료 | #2024120901                      ││
││ 제목: API 연결 문제                              ││
││ 등록일: 2024-12-09 10:00                         ││
││ 답변일: 2024-12-09 15:00                         ││
││ [상세보기]                                       ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ 🕐 접수 | #2024120802                           ││
││ 제목: 손익 저널 작성법                           ││
││ 등록일: 2024-12-08 14:30                         ││
││ 상태: 처리중                                     ││
││ [상세보기]                                       ││
│└─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

**쿼리:**
```sql
SELECT * FROM support_tickets
WHERE user_id = current_user_id
ORDER BY created_at DESC;
```

#### 4.4 공지사항

**기능 ID:** FR-INQ-004

**설명:** 시스템 공지사항 조회

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 📢 공지사항                                         │
├─────────────────────────────────────────────────────┤
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ 📢 [중요] 2024-12-25 시스템 점검 안내           ││
││ 2024-12-20                                       ││
││ [자세히 보기]                                    ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ 🔔 새로운 기능 업데이트                         ││
││ 2024-12-15                                       ││
││ [자세히 보기]                                    ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ ┌─────────────────────────────────────────────────┐│
││ ⚠️ [긴급] 보안 업데이트 완료                    ││
││ 2024-12-10                                       ││
││ [자세히 보기]                                    ││
│└─────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────┘
```

---

### 5. 관리자 기능 (Admin)

#### 5.1 회원 관리

**기능 ID:** FR-ADMIN-001

**설명:** 전체 회원 조회 및 상태 관리

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 회원 관리                                           │
├─────────────────────────────────────────────────────┤
│ 🔍 [이메일/이름 검색]  [전체▼] [교육완료] [대기]   │
│                                                     │
│ ┌──────┬──────────┬────────┬──────────┬──────────┐│
││ 이름 │ 이메일   │ 가입일 │ 교육이수 │ 추천코드 ││
│├──────┼──────────┼────────┼──────────┼──────────┤│
││ 김철수│ kim@...  │ 12-01  │ ✅       │ HDH...   ││
││ 이영희│ lee@...  │ 11-28  │ ❌       │ -        ││
│└──────┴──────────┴────────┴──────────┴──────────┘│
└─────────────────────────────────────────────────────┘
```

#### 5.2 교육 신청 관리

**기능 ID:** FR-ADMIN-002

**설명:** 아카데미 교육 신청 승인 및 이수 처리

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 교육 신청 관리                                      │
├─────────────────────────────────────────────────────┤
│ [신청 대기] [교육 진행중] [이수 완료]               │
│                                                     │
│ ━━ 신청 대기 (3건) ━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ ┌──────┬──────────┬──────────┬──────────┐        │
││ 이름 │ 이메일   │ 신청일시 │ 액션     │        │
│├──────┼──────────┼──────────┼──────────┤        │
││ 김철수│ kim@...  │ 12-02    │ [승인]   │        │
││ 이영희│ lee@...  │ 12-01    │ [승인]   │        │
│└──────┴──────────┴──────────┴──────────┘        │
└─────────────────────────────────────────────────────┘
```

#### 5.3 추천인 코드 관리

**기능 ID:** FR-ADMIN-003

**설명:** 추천인 코드 발급 및 추적

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 추천인 코드 관리                                    │
├─────────────────────────────────────────────────────┤
│ [신청 대기] [발급 완료]                             │
│                                                     │
│ ━━ 신청 대기 (2건) ━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ ┌──────┬──────────┬──────────┬──────────┐        │
││ 이름 │ 이메일   │ 교육이수 │ 액션     │        │
│├──────┼──────────┼──────────┼──────────┤        │
││ 김철수│ kim@...  │ ✅       │ [발급]   │        │
│└──────┴──────────┴──────────┴──────────┘        │
└─────────────────────────────────────────────────────┘
```

**처리 (발급):**
```sql
-- 추천인 코드 생성 및 발급
UPDATE referral_codes
SET status = 'approved',
    code = CONCAT('HDH', EXTRACT(YEAR FROM NOW()),
                  UPPER(SUBSTRING(MD5(RANDOM()::TEXT), 1, 6))),
    approved_at = NOW(),
    approved_by = 'sunny'
WHERE user_id = target_user_id;
```

#### 5.4 문의 관리

**기능 ID:** FR-ADMIN-004

**설명:** 고객센터 문의 답변 작성

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 문의 관리                                           │
├─────────────────────────────────────────────────────┤
│ [답변 대기 (5)] [답변 완료 (50)]                    │
│                                                     │
│ 🕐 kim@example.com | 2024-12-09 10:00              │
│ 제목: API 연결 문제                                 │
│ 문의: API 키를 입력했는데 연결이 안 됩니다...       │
│                                                     │
│ 답변:                                               │
│ ┌─────────────────────────────────────────────────┐│
││ 안녕하세요, 김철수님.                            ││
││                                                  ││
││ API 연결 문제 해결 방법을 안내드립니다...        ││
│└─────────────────────────────────────────────────┘│
│                                                     │
│ [답변 완료]                                         │
└─────────────────────────────────────────────────────┘
```

**처리:**
```sql
UPDATE support_tickets
SET status = 'answered',
    admin_reply = '답변 내용...',
    replied_at = NOW(),
    replied_by = 'sunny'
WHERE id = ticket_id;
```

**이메일 알림 (사용자에게):**
```
제목: [HDH Fintech] 문의 답변 - API 연결 문제

김철수님, 안녕하세요.

문의하신 내용에 대한 답변입니다:

{admin_reply}

추가 문의사항이 있으시면 언제든 연락주세요.

감사합니다.
Sunny 드림
```

#### 5.5 공지사항 관리

**기능 ID:** FR-ADMIN-005

**설명:** 공지사항 CRUD

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 공지사항 관리                                       │
├─────────────────────────────────────────────────────┤
│ [+ 새 공지사항]         🔍 [검색...]  [삭제]       │
│                                                     │
│ ┌────┬────────────┬──────────┬──────────┬────────┐│
││ 중요│ 제목       │ 작성일   │ 조회수   │ 액션   ││
│├────┼────────────┼──────────┼──────────┼────────┤│
││ 📢 │ 시스템 점검│ 12-20    │ 45       │ [수정] ││
││ 🔔 │ 새 기능... │ 12-15    │ 120      │ [삭제] ││
│└────┴────────────┴──────────┴──────────┴────────┘│
└─────────────────────────────────────────────────────┘
```

#### 5.6 통계 및 분석

**기능 ID:** FR-ADMIN-006

**설명:** 주요 지표 대시보드

**화면:**
```
┌─────────────────────────────────────────────────────┐
│ 📊 관리자 대시보드                                  │
├─────────────────────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐ ┌──────────┐            │
││ 👥 회원  │ │ 🎓 교육  │ │ 💬 문의  │            │
││   30     │ │  완료 12 │ │  대기 3  │            │
││  +5      │ │  대기 5  │ │          │            │
│└──────────┘ └──────────┘ └──────────┘            │
│                                                     │
│ 📈 월별 가입자 추이                                 │
│ (차트)                                              │
│                                                     │
│ 📋 최근 활동                                        │
│ - 김철수님이 교육을 신청했습니다 (10분 전)          │
│ - 이영희님이 회원가입했습니다 (1시간 전)            │
└─────────────────────────────────────────────────────┘
```

---

## 🔒 비기능 요구사항 (Non-Functional Requirements)

### NFR-1: 보안

#### NFR-1.1 인증/인가
- Supabase Auth 기반 JWT 토큰 인증
- 모든 API 요청에 인증 필요
- Row Level Security (RLS)로 데이터 격리

#### NFR-1.2 데이터 보호
- 비밀번호 해싱 (bcrypt)
- HTTPS 강제
- SQL Injection 방어 (Prepared Statements)
- XSS 방어 (Content Security Policy)

### NFR-2: 성능

#### NFR-2.1 응답 시간
- 페이지 로드: 2초 이내
- API 응답: 500ms 이내
- AI 챗봇 응답: 5초 이내

#### NFR-2.2 확장성
- 동시 사용자 100명 지원 (초기)
- 1년 후 3,000명 지원 목표

### NFR-3: 가용성

- 업타임: 99% 이상
- 백업: 일 1회 자동 백업 (Supabase)
- 복구 시간: 4시간 이내

### NFR-4: 호환성

#### NFR-4.1 브라우저
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### NFR-4.2 기기
- 데스크톱 (1920×1080 이상)
- 태블릿 (768px 이상)
- 모바일 (375px 이상)

### NFR-5: 사용성

- 반응형 디자인 (모바일 대응)
- 직관적 UI/UX
- 한국어 전용

---

## 📋 제외 범위 (Out of Scope)

- ❌ 자동 결제 (카드, 자동이체)
- ❌ 팀 협업 기능
- ❌ 실시간 채팅
- ❌ 모바일 네이티브 앱
- ❌ 다국어 지원
- ❌ 소셜 로그인

---

## ✅ 완료 조건 (Definition of Done)

각 기능은 다음 조건을 모두 충족해야 "완료"로 간주:

1. ✅ 코드 작성 완료
2. ✅ Supabase DB 연결 (실제 데이터)
3. ✅ 기본 테스트 완료
4. ✅ UI/UX 디자인 반영
5. ✅ 반응형 디자인 적용
6. ✅ 보안 검증 (RLS, 인증)
7. ✅ 크로스 브라우저 테스트

---

**HDH Fintech - HDH 솔루션 운영자를 위한 통합 지원 플랫폼**
