
// ChatGPT API ì—”ë“œí¬ì¸íŠ¸
app.post('/chatgpt/ask', async (req, res) => {
    try {
        const { question } = req.body;

        if (!question) {
            return res.status(400).json({
                success: false,
                error: 'ì§ˆë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤.'
            });
        }

        console.log('ğŸ’¬ ChatGPT ì§ˆë¬¸:', question.substring(0, 50) + '...');

        // AI_Link ì„œë²„ë¡œ í”„ë¡ì‹œ
        const aiResponse = await fetch('http://localhost:3031/ask-chatgpt', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question })
        });

        const result = await aiResponse.json();

        if (result.success) {
            console.log('âœ… ChatGPT ì‘ë‹µ ì„±ê³µ');
            res.json({
                success: true,
                question: question,
                answer: result.answer,
                timestamp: new Date().toISOString()
            });
        } else {
            throw new Error(result.error || 'ChatGPT API ì˜¤ë¥˜');
        }

    } catch (error) {
        console.error('âŒ ChatGPT API ì˜¤ë¥˜:', error.message);
        res.status(500).json({
            success: false,
            error: error.message
        });
    }
});

// Gemini API ì—”ë“œí¬ì¸íŠ¸
app.post('/gemini/ask', async (req, res) => {
    try {
        const { question } = req.body;

        if (!question) {
            return res.status(400).json({
                success: false,
                error: 'ì§ˆë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤.'
            });
        }

        console.log('ğŸ”· Gemini ì§ˆë¬¸:', question.substring(0, 50) + '...');

        // AI_Link ì„œë²„ë¡œ í”„ë¡ì‹œ
        const aiResponse = await fetch('http://localhost:3031/ask-gemini', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question })
        });

        const result = await aiResponse.json();

        if (result.success) {
            console.log('âœ… Gemini ì‘ë‹µ ì„±ê³µ');
            res.json({
                success: true,
                question: question,
                answer: result.answer,
                timestamp: new Date().toISOString()
            });
        } else {
            throw new Error(result.error || 'Gemini API ì˜¤ë¥˜');
        }

    } catch (error) {
        console.error('âŒ Gemini API ì˜¤ë¥˜:', error.message);
        res.status(500).json({
            success: false,
            error: error.message
        });
    }
});

