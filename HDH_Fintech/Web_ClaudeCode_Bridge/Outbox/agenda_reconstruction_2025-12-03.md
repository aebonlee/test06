# 📋 아젠다 재구성 보고서 (2025-12-03)

**작성일**: 2025-12-03
**목적**: User Flow 문서 분석 기반 실전 아젠다 재정의

---

## 🔍 User Flow 분석 결과

### 5개 User Flow 확인:
1. **User Flow #1**: 회원가입 (Signup)
2. **User Flow #2**: 프로젝트 등록 (Project Registration)
3. **User Flow #3**: 플랫폼 이용료 납부 및 관리 (Subscription)
4. **User Flow #4**: AI 크레딧 충전 및 사용 (Credit Purchase)
5. **User Flow #5**: 홈 화면 & 사용자 가이드

---

## 🎯 기존 아젠다 (Outbox 기준)

### ✅ 완료된 아젠다:
- **Agenda #1**: 공지사항 (Notices) - 완료 (2025-12-01)
- **Agenda #2**: 학습용 콘텐츠 (Learning Contents) - 완료 (2025-12-01)
- **Agenda #3**: FAQ (자주 묻는 질문) - 완료 (2025-12-02)

### ⏳ 기존 계획 (미완료):
- **Agenda #4**: 마이페이지 & 결제/구독 - 계획만 있음

---

## ✨ 새로운 아젠다 제안 (User Flow 기반)

### 📌 아젠다 재구성 원칙:
1. **User Flow 기준**: 5개 User Flow를 3~4개 아젠다로 통합
2. **기능 연관성**: 연관된 기능끼리 묶기
3. **개발 우선순위**: 핵심 기능부터 순차 구현
4. **DB 공유**: 같은 테이블을 사용하는 기능 묶기

---

## 🎯 새로운 아젠다 (4개)

---

## 📋 Agenda #4: 회원가입 & 인증 시스템

### 🎯 목표
사용자가 회원가입하고 로그인하여 플랫폼을 이용할 수 있도록 함

### 📦 포함 기능

#### 1️⃣ 회원가입
- 회원가입 폼 (이메일, 비밀번호, 닉네임, 실명)
- 약관 동의 UI
- Supabase Auth 연동
- `users` 테이블 레코드 생성
- 회원 ID 자동 생성 (8자리 영숫자)
- 환영 팝업 (무료 기능 안내)

#### 2️⃣ 로그인 & 로그아웃
- 로그인 폼 (이메일 + 비밀번호)
- Supabase Auth 세션 관리
- 자동 로그인 (Remember Me)
- 로그아웃 기능

#### 3️⃣ 프로필 관리 (기본)
- 내 정보 조회 (닉네임, 이메일, 회원 ID)
- 닉네임 변경
- 비밀번호 변경
- 회원 탈퇴

### 📊 Database 테이블
- `users` (Supabase Auth + 사용자 정보)

### 🖥️ 화면
- `/signup` - 회원가입
- `/login` - 로그인
- `/profile` - 내 정보 (기본)

### 🔗 User Flow 매핑
- ✅ User Flow #1: 회원가입 (100%)

### ⏱️ 우선순위
**🔴 높음** - 플랫폼의 기본 전제 조건

---

## 📋 Agenda #5: 프로젝트 관리 & 설치비 납부

### 🎯 목표
사용자가 설치비를 납부하고 프로젝트를 등록/관리할 수 있도록 함

### 📦 포함 기능

#### 1️⃣ 설치비 납부
- 설치비 안내 페이지 (₩3,000,000)
- 입금 정보 표시 (은행, 계좌, 예금주)
- "입금 완료" 버튼
- 관리자 승인 대기 상태 표시

#### 2️⃣ 관리자: 입금 승인
- Admin Dashboard에 입금 대기 목록 표시
- 입금자명 확인
- "승인" 버튼 → `installation_fee_paid = true`
- 사용자에게 알림 발송
- 크레딧 ₩5,000 자동 지급

#### 3️⃣ 프로젝트 등록
- "새 프로젝트 등록" 버튼
- 설치비 미납 시 안내 페이지로 리다이렉트
- 진행 중인 프로젝트 있으면 완료 유도
- 프로젝트 등록 폼 (프로젝트명, 설명)
- 프로젝트 ID 자동 생성 (`{회원ID}-P{순번}`)

#### 4️⃣ 프로젝트 관리
- 내 프로젝트 목록 (진행 중, 완료)
- 프로젝트 상세 조회
- 프로젝트 완료 처리

#### 5️⃣ 사용 안내
- 프로젝트 등록 완료 후 사용법 안내 팝업
- SSAL Works 사용 방법 상세 설명
- Order Sheet 작성법 안내

### 📊 Database 테이블
- `users` (installation_fee_paid, installation_date)
- `projects` (프로젝트 정보)

### 🖥️ 화면
- `/payment/installation` - 설치비 안내
- `/projects` - 내 프로젝트 목록
- `/projects/new` - 새 프로젝트 등록
- `/projects/{id}` - 프로젝트 상세
- Admin: 입금 승인 섹션

### 🔗 User Flow 매핑
- ✅ User Flow #2: 프로젝트 등록 (100%)

### ⏱️ 우선순위
**🟡 중간** - 유료 전환의 핵심

---

## 📋 Agenda #6: 결제 & 구독 관리 시스템

### 🎯 목표
월간 플랫폼 이용료를 자동 결제하고 구독을 관리함

### 📦 포함 기능

#### 1️⃣ 결제 수단 등록
- 카드 자동결제 등록
- 계좌 자동이체 등록
- 토스 페이먼트 연동

#### 2️⃣ 월간 플랫폼 이용료 관리
- 설치비 납부일 기준 매월 자동 청구
- 첫 달 무료 (설치비 특전)
- 결제일 3일 전 알림
- 자동결제 실행 (매월 결제일 00:00)
- 결제 성공/실패 알림

#### 3️⃣ 결제 실패 처리
- 1차 실패 → 당일 재시도
- 2차 실패 → 익일 재시도 + 알림
- 3차 실패 → 서비스 일시정지
- 수동 결제 페이지

#### 4️⃣ 구독 관리
- 결제 내역 조회
- 다음 결제일 표시
- 구독 일시정지 (사용자 요청)
- 구독 해지

#### 5️⃣ 마이페이지 - 구독 섹션
- 현재 구독 상태 표시
- 다음 결제일 표시
- 월 이용료 표시
- 결제 수단 변경 버튼
- 결제 내역 조회 버튼

### 📊 Database 테이블
- `users` (subscription_status, platform_fee_start_date)
- `billing_history` (결제 내역)
- `payment_methods` (결제 수단)

### 🖥️ 화면
- `/subscription/payment-method` - 결제 수단 등록
- `/subscription/billing-history` - 결제 내역
- `/subscription/pause` - 구독 일시정지
- `/subscription/cancel` - 구독 해지
- `/subscription/manual-payment` - 수동 결제
- `/profile` - 마이페이지 (구독 정보 섹션)

### 🔗 User Flow 매핑
- ✅ User Flow #3: 플랫폼 이용료 납부 및 관리 (100%)

### ⏱️ 우선순위
**🟡 중간** - 수익화의 핵심

---

## 📋 Agenda #7: AI 크레딧 & Q&A 시스템

### 🎯 목표
사용자가 AI 크레딧을 충전하고 AI 서비스를 이용함

### 📦 포함 기능

#### 1️⃣ AI 크레딧 충전
- 크레딧 잔액 위젯 (우측 상단)
- 충전 금액 선택 (5가지 옵션 + 직접 입력)
- 충전 보너스 표시 (최대 25%)
- 토스 페이먼트 결제
- 충전 완료 후 잔액 즉시 반영

#### 2️⃣ 크레딧 관리
- 크레딧 충전 내역 조회
- 크레딧 사용 내역 조회
- 잔액 부족 시 자동 알림
- 설치비 납부 시 ₩5,000 자동 지급

#### 3️⃣ AI Q&A 서비스
- ChatGPT, Gemini, Perplexity 선택
- 질문 입력 폼
- AI 응답 표시
- 크레딧 차감 (실시간 가격 표시)
- 대화 이력 저장

#### 4️⃣ AI 가격 자동 관리 (Admin)
- 매일 00:00 API 사용 비용 집계
- 최근 7일 평균 원가 계산
- 마진 20% 적용
- `ai_service_pricing` 테이블 자동 업데이트
- 가격 변경 10% 이상 시 사용자 알림

#### 5️⃣ 마이페이지 - 크레딧 섹션
- 현재 잔액 표시
- 사용 가능 횟수 표시 (AI별)
- 충전 버튼
- 충전 내역 버튼
- 사용 내역 버튼

### 📊 Database 테이블
- `credit_balance` (사용자별 잔액)
- `credit_transactions` (충전/사용 내역)
- `ai_service_pricing` (AI 서비스 가격)
- `ai_usage_log` (AI 사용 로그)

### 🖥️ 화면
- `/credit/purchase` - 크레딧 충전
- `/credit/history` - 충전/사용 내역
- `/ai-qa` - AI Q&A (ChatGPT, Gemini, Perplexity)
- `/profile` - 마이페이지 (크레딧 정보 섹션)
- Admin: AI 가격 관리 섹션

### 🔗 User Flow 매핑
- ✅ User Flow #4: AI 크레딧 충전 및 사용 (100%)

### ⏱️ 우선순위
**🟢 낮음** - 부가 서비스 (프로젝트 관리가 핵심)

---

## 📊 아젠다 비교표

| 항목 | 기존 아젠다 | 새로운 아젠다 |
|------|------------|-------------|
| **완료** | #1 공지사항<br>#2 학습용 콘텐츠<br>#3 FAQ | 변경 없음 |
| **미완료** | #4 마이페이지 & 결제/구독 | #4 회원가입 & 인증<br>#5 프로젝트 관리 & 설치비<br>#6 결제 & 구독<br>#7 AI 크레딧 & Q&A |
| **총 개수** | 4개 | 7개 |
| **User Flow 반영** | 일부만 | 100% 반영 |

---

## 🎯 개발 우선순위 및 순서

### Phase 1: 기본 인프라 (필수) ✅ **완료**
- ✅ Agenda #1: 공지사항
- ✅ Agenda #2: 학습용 콘텐츠
- ✅ Agenda #3: FAQ

### Phase 2: 회원 & 프로젝트 관리 (핵심) ⏳ **다음 단계**
- 🔴 **Agenda #4: 회원가입 & 인증 시스템** (최우선)
- 🟡 **Agenda #5: 프로젝트 관리 & 설치비 납부** (그 다음)

### Phase 3: 수익화 시스템 (중요) ⏸️ **이후**
- 🟡 **Agenda #6: 결제 & 구독 관리 시스템**
- 🟢 **Agenda #7: AI 크레딧 & Q&A 시스템**

---

## 💡 권장 작업 순서

### 1단계: Agenda #4 (회원가입 & 인증) 🔴
**이유**: 모든 기능의 전제 조건
- 회원가입 없이는 다른 기능 사용 불가
- Supabase Auth 연동 필수
- `users` 테이블 생성 필수

**예상 작업량**: 2-3일
**주요 작업**:
- Supabase Auth 설정
- 회원가입 폼 구현
- 로그인/로그아웃 구현
- 세션 관리

### 2단계: Agenda #5 (프로젝트 관리 & 설치비) 🟡
**이유**: 플랫폼의 핵심 기능
- 프로젝트 등록이 플랫폼의 핵심
- 설치비 납부가 유료 전환의 시작
- Admin 승인 기능 필요

**예상 작업량**: 3-4일
**주요 작업**:
- 설치비 안내 페이지
- Admin 승인 기능
- 프로젝트 등록 폼
- 프로젝트 목록

### 3단계: Agenda #6 (결제 & 구독) 🟡
**이유**: 월간 수익 모델
- 설치비 납부 후 자연스러운 흐름
- 토스 페이먼트 연동 필요
- 자동결제 시스템 구현

**예상 작업량**: 4-5일
**주요 작업**:
- 토스 페이먼트 연동
- 자동결제 시스템
- 결제 내역 조회
- 구독 관리

### 4단계: Agenda #7 (AI 크레딧) 🟢
**이유**: 부가 서비스
- 프로젝트 관리가 핵심이므로 후순위
- 하지만 수익 다각화에 도움
- OpenAI, Gemini API 연동 필요

**예상 작업량**: 3-4일
**주요 작업**:
- 크레딧 충전 시스템
- AI API 연동
- 가격 자동 관리 시스템

---

## 📝 다음 단계

### 즉시 시작 (내일부터):
**🔴 Agenda #4: 회원가입 & 인증 시스템**

**작업 항목**:
1. Supabase Auth 설정 확인
2. `users` 테이블 생성 SQL 작성
3. 회원가입 폼 UI 구현
4. Supabase Auth 연동
5. 로그인/로그아웃 구현
6. 세션 관리 구현
7. 내 정보 페이지 (기본)

**참고 문서**:
- `0_프로젝트_기획/1-2_User_Flows/1_Signup/flow.md`
- `0_프로젝트_기획/1-2_User_Flows/1_Signup/ui_specs.md`

---

## ⚠️ 중요 참고사항

### 기존 완료 아젠다 관련:
- **개발용 RLS 정책** 현재 적용 중 (anon 접근 허용)
- **프로덕션 배포 전** 원래 RLS 정책으로 교체 필요
- `.claude/CLAUDE.md`에 경고 기록됨

### Database 설계:
- User Flow 문서에 DB 스키마 포함되어 있음
- `1_프로토타입_제작/Database/` 폴더에 SQL 파일 작성 예정
- Supabase에서 순차적으로 실행

---

**작성자**: Claude Code
**작성일**: 2025-12-03
**근거**: User Flow #1~#5 전체 분석
