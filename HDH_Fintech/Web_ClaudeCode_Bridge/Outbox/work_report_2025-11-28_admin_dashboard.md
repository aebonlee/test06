# 작업 보고서: 어드민 대시보드 기능 확장

**작성일**: 2025-11-28
**작업 파일**: `C:\!SSAL_Works_Private\1_프로토타입_제작\Frontend\Prototype\admin-dashboard_prototype.html`
**작업 분류**: 프론트엔드 프로토타입 개발

---

## 1. 사이드바 메뉴 구조 재편

### 변경 전
- 단일 "관리" 섹션에 모든 메뉴 항목이 혼재

### 변경 후
메뉴를 논리적 그룹으로 재편성:

```
컨텐츠 관리
├── 📢 공지사항 관리
├── 📚 학습용 컨텐츠 관리
├── 🙋 FAQ 관리
├── 📝 Order Sheet 템플릿
└── 📖 안내문 관리

회원/결제
├── 👥 회원 관리
├── 🔄 구독 관리
├── 💳 결제 관리
├── 🪙 크레딧 관리
└── 💬 문의 관리

통계
└── 📈 통계 및 분석

시스템
├── ⚙️ 시스템 설정
└── 📋 로그 관리
```

### 개선 효과
- 관리자가 원하는 기능을 빠르게 찾을 수 있음
- 업무 영역별로 구분되어 직관적인 네비게이션 제공

---

## 2. 컨텐츠 관리 시스템 구현

### 2.1 📢 공지사항 관리

**기능 설명**: 사용자에게 표시될 공지사항을 관리

**구현 항목**:
- 공지사항 통계 카드 (전체 공지, 게시 중, 긴급 공지)
- 공지사항 목록 테이블
  - 중요도 표시 (긴급/중요/일반)
  - 제목, 게시일, 상태, 조회수
  - 수정/삭제 기능
- 새 공지 추가 버튼

**데이터 구조**:
| 필드 | 설명 |
|------|------|
| 중요도 | 긴급(빨강), 중요(노랑), 일반(초록) |
| 제목 | 공지 제목 |
| 게시일 | YYYY-MM-DD |
| 상태 | 게시중/예약/종료 |
| 조회수 | 숫자 |

---

### 2.2 📝 Order Sheet 템플릿 관리

**기능 설명**: 각 단계별 Order Sheet 템플릿을 관리

**구현 항목**:
- 템플릿 통계 (단계 그룹 수, 템플릿 수, 미작성 수)
- 템플릿 목록 테이블
  - 단계 ID (코드명)
  - 단계명 (한글)
  - 템플릿 상태 (작성완료/미작성)
  - 수정일
  - 수정/미리보기 기능

**단계 그룹별 현황 시각화**:
```
☆ 특별단계     1/1 완료
0 사업계획     3/3 완료
1 프로젝트기획  6/6 완료
2 개발준비     4/4 완료
S1-S6 시스템개발  6/6 완료
7 테스트       3/3 완료
8 배포         2/2 완료
9 운영         3/3 완료
```

---

### 2.3 📖 안내문 관리

**기능 설명**: 각 단계별 가이드 팝업 안내문을 관리

**구현 항목**:
- 안내문 통계 (전체, 작성 완료, 미작성)
- 안내문 목록 테이블
  - 단계 ID
  - 단계명
  - hasAction 여부 (true/false)
  - 확인 메시지
  - 상태
  - 수정/미리보기 기능

**hasAction 설명**:
- `false`: 팝업에 [확인] 버튼만 표시
- `true`: 팝업에 [예]/[아니오] 버튼 표시 + 확인 메시지 필요

---

## 3. 회원/결제 관리 시스템

### 3.1 🔄 구독 관리

**기능 설명**: 설치비 및 월 사용료 결제 현황을 통합 관리

#### 구독 통계
| 항목 | 값 |
|------|-----|
| 전체 구독자 | 45명 |
| 정상 구독 | 42명 |
| 미납/만료 | 3명 |
| 이번 달 예상 수익 | ₩2.25M |

#### 설치비 결제 현황 (₩3,000,000)
- 결제방식: 일시불 / 분할(3회, 6회)
- 상태: 완납 / 분할 진행 중 (예: 2/3 완료)
- 상세 보기 기능

#### 월 사용료 현황 (₩50,000/월)
- 구독 시작일
- 결제일 (매월 N일)
- 다음 결제일
- 자동결제 ON/OFF
- 상태: 정상 / 미납 N일
- 미납자 알림 발송 기능

#### 갱신/만료 예정 (7일 이내)
- 만료일, 남은 일수
- 자동갱신 여부
- 관리 기능

---

### 3.2 🪙 크레딧 관리 강화

**기존 기능에 추가된 항목**:

#### AI별 크레딧 사용 내역
| 필드 | 설명 |
|------|------|
| 일시 | YYYY-MM-DD HH:MM |
| 사용자 | 이메일 |
| AI 서비스 | 🟠 Perplexity / 🟢 ChatGPT / 🔵 Gemini |
| 사용량 | 토큰 수 |
| 차감 크레딧 | -N C |

#### 환불 내역
| 필드 | 설명 |
|------|------|
| 환불 ID | REF-YYYY-NNN |
| 사용자 | 이메일 |
| 환불 크레딧 | N C |
| 사유 | 환불 사유 |
| 처리일 | YYYY-MM-DD |
| 상태 | 완료/대기/반려 |

#### 잔액 부족 알림 대상 (1,000 C 미만)
- 현재 잔액
- 최근 사용량 (일 평균)
- 예상 소진일
- 개별 알림 / 일괄 알림 발송 기능

---

## 4. 통계 및 분석 개선

### 변경 원칙
> "플랫폼 내부에서 측정 가능한 것만 남겨" (외부 도구 필요 항목 제거)

### 제거된 항목
- ❌ 총 방문자 (Google Analytics 필요)
- ❌ 평균 체류시간 (외부 분석 도구 필요)
- ❌ 일별 사용량 추이 차트

### 유지/추가된 항목

#### 회원 통계
| 항목 | 설명 | 측정 방법 |
|------|------|----------|
| 총 회원 수 | 전체 가입자 | DB users 테이블 COUNT |
| 신규 가입 | 기간 내 가입 | created_at 기준 |
| 활성 구독자 | 유료 구독 중 | subscription_status = 'active' |
| Order 작성 수 | 작성된 Order Sheet | orders 테이블 COUNT |

#### 매출 통계
| 항목 | 금액 | 측정 방법 |
|------|------|----------|
| 설치비 매출 (누적) | ₩135M | installation_payments SUM |
| 월 사용료 (이번 달) | ₩2.25M | subscription_payments SUM |
| 크레딧 판매 (이번 달) | ₩1.24M | credit_purchases SUM |
| 이번 달 총 매출 | ₩3.49M | 합계 |

#### AI 사용 통계 (마진 분석)
| AI 서비스 | 호출 수 | 크레딧 수익 | 실제 비용 | 마진 |
|-----------|---------|-------------|-----------|------|
| 🟠 Perplexity | 23,456 | ₩468,900 | ₩312,000 | ₩156,900 |
| 🟢 ChatGPT | 15,678 | ₩235,170 | ₩156,780 | ₩78,390 |
| 🔵 Gemini | 6,544 | ₩65,440 | ₩32,720 | ₩32,720 |
| **합계** | 45,678 | ₩769,510 | ₩501,500 | ₩268,010 |

**마진 계산 의미**:
- 크레딧 수익: 사용자에게 받은 크레딧 금액
- 실제 비용: API 사용에 지불한 비용
- 마진: 수익 - 비용 (플랫폼 이익)

---

## 5. 구현 세부사항

### 사용된 CSS 클래스/컴포넌트
- `.content-view`: 섹션 컨테이너
- `.content-header`: 제목 영역
- `.stats-grid`: 통계 카드 그리드
- `.stat-card`: 개별 통계 카드 (primary/success/warning/danger)
- `.content-section`: 내용 섹션
- `.section-header`: 섹션 제목 + 액션 버튼
- `.data-table`: 데이터 테이블
- `.status-badge`: 상태 표시 배지
- `.action-link`: 테이블 내 액션 링크

### JavaScript 함수 (플레이스홀더)
```javascript
// 공지사항
showNoticeForm()     // 새 공지 추가 폼
editNotice()         // 공지 수정
deleteNotice()       // 공지 삭제

// Order Sheet 템플릿
showOrderSheetForm() // 새 템플릿 추가 폼
editOrderSheet(id)   // 템플릿 수정

// 안내문
showGuideForm()      // 새 안내문 추가 폼
editGuide(id)        // 안내문 수정

// 구독 관리
sendPaymentReminder() // 미납자 알림 발송

// 크레딧 관리
sendLowBalanceAlert() // 잔액 부족 알림 발송
```

---

## 6. 향후 작업 제안

### 즉시 구현 가능
1. JavaScript 함수 구현 (모달 폼, CRUD 로직)
2. 검색/필터링 기능 추가
3. 페이지네이션 구현

### 백엔드 연동 필요
1. API 엔드포인트 설계 및 구현
2. 데이터베이스 스키마 확장
3. 실시간 데이터 바인딩

### 추가 기능 고려
1. 엑셀/CSV 내보내기 기능
2. 대시보드 위젯 커스터마이징
3. 알림 발송 이력 관리

---

## 요약

| 분야 | 작업 내용 | 상태 |
|------|----------|------|
| 사이드바 | 메뉴 구조 재편 (컨텐츠/회원결제/통계/시스템) | ✅ 완료 |
| 컨텐츠 관리 | 공지사항 관리 섹션 | ✅ 완료 |
| 컨텐츠 관리 | Order Sheet 템플릿 관리 섹션 | ✅ 완료 |
| 컨텐츠 관리 | 안내문 관리 섹션 | ✅ 완료 |
| 회원/결제 | 구독 관리 섹션 (설치비, 월 사용료) | ✅ 완료 |
| 회원/결제 | 크레딧 관리 강화 (AI별 사용, 환불, 알림) | ✅ 완료 |
| 통계 | 측정 가능 항목만 유지 + 마진 분석 | ✅ 완료 |

**총 작업 시간**: 세션 내 완료
**변경 파일 수**: 1개 (`admin-dashboard_prototype.html`)
